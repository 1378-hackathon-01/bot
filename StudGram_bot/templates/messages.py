from datetime import datetime
from typing import List, Dict
from models.user import User, UserStatus, UserRole
from services.calendar_service import CalendarService

class MessageTemplates:
    """–®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π"""
    
    @staticmethod
    def get_main_menu(user: User) -> str:
        """–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º –∑–∞—è–≤–∫–∏"""
        if user.application_approved and user.status == UserStatus.APPROVED:
            return """–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é StudGram

–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
‚Ä¢ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
‚Ä¢ –î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã 
‚Ä¢ –ß–∞—Ç-–±–æ—Ç ü§ñ
‚Ä¢ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å"""
        else:
            return """–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ StudGram

–í–∞—à–∞ –∑–∞—è–≤–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ —É—á–µ–±–Ω–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è.

–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
‚Ä¢ –ú–æ–π —Å—Ç–∞—Ç—É—Å - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–∫–∏
‚Ä¢ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å - –≤–∞—à–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã."""
    
    @staticmethod
    def get_schedule_menu() -> str:
        """–ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è"""
        return "üìö –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:"
    
    @staticmethod
    def get_calendar(calendar_days: List[Dict], current_month: datetime) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è"""
        month_names = [
            "–Ø–Ω–≤–∞—Ä—å", "–§–µ–≤—Ä–∞–ª—å", "–ú–∞—Ä—Ç", "–ê–ø—Ä–µ–ª—å", "–ú–∞–π", "–ò—é–Ω—å",
            "–ò—é–ª—å", "–ê–≤–≥—É—Å—Ç", "–°–µ–Ω—Ç—è–±—Ä—å", "–û–∫—Ç—è–±—Ä—å", "–ù–æ—è–±—Ä—å", "–î–µ–∫–∞–±—Ä—å"
        ]
        
        month_name = month_names[current_month.month - 1]
        year = current_month.year
        
        calendar_text = f"üóìÔ∏è –ö–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–∞ {month_name} {year} –≥–æ–¥–∞:\n\n"
        calendar_text += "–ü–Ω –í—Ç –°—Ä –ß—Ç –ü—Ç –°–± –í—Å\n"
        
        first_day_weekday = current_month.weekday()
        calendar_text += "   " * first_day_weekday
        
        for day_data in calendar_days:
            day = day_data['day']
            is_study = day_data['is_study']
            is_today = day_data['is_today']
            
            if is_today:
                calendar_text += f"[{day:2d}] "
            elif is_study:
                calendar_text += f" {day:2d}  "
            else:
                calendar_text += f"({day:2d}) "
            
            if day_data['weekday'] == 6:
                calendar_text += "\n"
        
        calendar_text += "\n\nüìù –û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è:"
        calendar_text += "\n‚Ä¢ 12  - —É—á–µ–±–Ω—ã–π –¥–µ–Ω—å"
        calendar_text += "\n‚Ä¢ (12) - –≤—ã—Ö–æ–¥–Ω–æ–π –¥–µ–Ω—å" 
        calendar_text += "\n‚Ä¢ [12] - —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å"
        calendar_text += "\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:"
        calendar_text += "\n‚Ä¢ –í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ –î–î.–ú–ú.–ì–ì–ì–ì (–Ω–∞–ø—Ä–∏–º–µ—Ä, 15.12.2024)"
        calendar_text += "\n‚Ä¢ '–ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü' - –ø–µ—Ä–µ–π—Ç–∏ –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –º–µ—Å—è—Ü—É"
        calendar_text += "\n‚Ä¢ '–°–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü' - –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –º–µ—Å—è—Ü—É"
        calendar_text += "\n‚Ä¢ '–°–µ–≥–æ–¥–Ω—è' - –≤—ã–±—Ä–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è—à–Ω—é—é –¥–∞—Ç—É"
        calendar_text += "\n‚Ä¢ '–ù–∞–∑–∞–¥' - –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
        
        return calendar_text
    
    @staticmethod
    def get_schedule(schedule: List[dict], date: datetime) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è"""
        day_names = ["–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫", "–í—Ç–æ—Ä–Ω–∏–∫", "–°—Ä–µ–¥–∞", "–ß–µ—Ç–≤–µ—Ä–≥", "–ü—è—Ç–Ω–∏—Ü–∞", "–°—É–±–±–æ—Ç–∞", "–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ"]
        day_name = day_names[date.weekday()]
        date_str = date.strftime("%d.%m.%Y")
        
        schedule_text = f"üìö –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ {date_str} ({day_name}):\n\n"
        
        if not schedule:
            schedule_text += "üéâ –ü–∞—Ä –Ω–µ—Ç! –û—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å –¥–ª—è –æ—Ç–¥—ã—Ö–∞ –∏–ª–∏ —Å–∞–º–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è."
        else:
            for i, lesson in enumerate(schedule, 1):
                schedule_text += f"{i}. {lesson['subject']}\n"
                schedule_text += f"   üë®‚Äçüè´ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å: {lesson['teacher']}\n"
                schedule_text += f"   ‚è∞ –í—Ä–µ–º—è: {lesson['time']}\n"
                schedule_text += f"   üè´ –ê—É–¥–∏—Ç–æ—Ä–∏—è: {lesson['room']}\n"
                if lesson.get('online_link'):
                    schedule_text += f"   üîó –°—Å—ã–ª–∫–∞: {lesson['online_link']}\n"
                schedule_text += "\n"
        
        schedule_text += "\n–ù–∞–≤–∏–≥–∞—Ü–∏—è:"
        schedule_text += "\n‚Ä¢ '–ö–∞–ª–µ–Ω–¥–∞—Ä—å' - –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≤—ã–±–æ—Ä—É –¥–∞—Ç—ã"
        schedule_text += "\n‚Ä¢ '–ù–∞–∑–∞–¥' - –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
        
        return schedule_text
    
    @staticmethod
    def get_subjects_list(subjects: List[dict]) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)"""
        if not subjects:
            return "üìö –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —É –≤–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω."
        
        subjects_text = f"üìö –í–∞—à–∏ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã ({len(subjects)}):\n\n"
        
        for i, subject in enumerate(subjects, 1):
            subjects_text += f"{i}. **{subject.get('title', '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è')}**\n"
            
            if subject.get('abbreviation'):
                subjects_text += f"   *–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ: {subject['abbreviation']}*\n"
            
            if subject.get('description'):
                desc = subject['description']
                if len(desc) > 100:
                    desc = desc[:100] + "..."
                subjects_text += f"   {desc}\n"
            
            subjects_text += "\n"
        
        return subjects_text

    @staticmethod
    def get_subject_details(subject: dict) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ"""
        subject_text = f"üìö **{subject.get('title', '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è')}**\n\n"
        
        # –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        if subject.get('abbreviation'):
            subject_text += f"*–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ:* {subject['abbreviation']}\n"
        
        if subject.get('description'):
            subject_text += f"*–û–ø–∏—Å–∞–Ω–∏–µ:* {subject['description']}\n"
        
        # –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã (content)
        if subject.get('content'):
            content = subject['content']
            subject_text += f"\n*–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:*\n{content}\n"
        
        subject_text += "\n\nüîô *–ù–∞–∑–∞–¥* - –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –¥–∏—Å—Ü–∏–ø–ª–∏–Ω"
        
        return subject_text

    @staticmethod
    def get_assignments(subjects: List[dict]) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º –¥–∏—Å—Ü–∏–ø–ª–∏–Ω"""
        if not subjects:
            return "üìö –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —É –≤–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω."
        
        assignments_text = f"üìö **–í–∞—à–∏ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –∏ –∑–∞–¥–∞–Ω–∏—è** ({len(subjects)}):\n\n"
        
        for i, subject in enumerate(subjects, 1):
            assignments_text += f"**{i}. {subject.get('title', '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è')}**\n"
            
            # –î–æ–±–∞–≤–ª—è–µ–º –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—É –µ—Å–ª–∏ –µ—Å—Ç—å
            if subject.get('abbreviation'):
                assignments_text += f"*–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ:* {subject['abbreviation']}\n"
            
            # –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –µ—Å–ª–∏ –µ—Å—Ç—å
            if subject.get('content'):
                content = subject['content']
                # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
                if len(content) > 250:
                    content = content[:250] + "..."
                assignments_text += f"*–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:* {content}\n"
            else:
                assignments_text += f"*–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç\n"
            
            
            # –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –º–µ–∂–¥—É –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞–º–∏
            assignments_text += "‚îÄ" * 20 + "\n\n"
        
        assignments_text += "üí° *–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å StudGram*\n\n"
        assignments_text += "üîÑ *–û–±–Ω–æ–≤–∏—Ç—å* - –æ–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω\n"
        assignments_text += "üîô *–ù–∞–∑–∞–¥* - –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
        
        return assignments_text

    @staticmethod
    def get_bot_info() -> str:
        """–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ"""
        return """‚ÑπÔ∏è –û –±–æ—Ç–µ StudGram

ü§ñ StudGram Bot - –≤–∞—à —É–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ —É—á–µ–±–µ!

–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

üìö –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π
‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ –ª—é–±–æ–π –¥–µ–Ω—å
‚Ä¢ –£–¥–æ–±–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã
‚Ä¢ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∞—É–¥–∏—Ç–æ—Ä–∏—è—Ö

üìù –£—á–µ–±–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
‚Ä¢ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω
‚Ä¢ –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∫–∞–∂–¥–æ–º—É –ø—Ä–µ–¥–º–µ—Ç—É
‚Ä¢ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

ü§ñ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
‚Ä¢ –ü–æ–º–æ—â—å —Å —É—á–µ–±–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏
‚Ä¢ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö —Ç–µ–º
‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞–Ω–∏–π
‚Ä¢ –†–∞–±–æ—Ç–∞ —Å —Ç–µ–∫—Å—Ç–æ–º –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

üë§ –õ–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å
‚Ä¢ –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã StudGram
‚Ä¢ –°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –∏ –¥–æ—Å—Ç—É–ø–æ–≤
‚Ä¢ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–µ –∏ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–µ

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
‚Ä¢ –ë–æ—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π StudGram
‚Ä¢ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∏ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

–î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –≤—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é! üöÄ

–ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤–∞—à–µ–≥–æ —É—á–µ–±–Ω–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è."""

    @staticmethod
    def get_profile(user: User) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        status_text = "–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω" if user.status == UserStatus.APPROVED else "–æ–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"
        role_text = "–°—Ç—É–¥–µ–Ω—Ç"
        
        profile_text = f"""üë§ –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å:

üìù –§–ò–û: {user.full_name}
üéì –í—É–∑: {user.university}"""
        
        if hasattr(user, 'faculty') and user.faculty:
            profile_text += f"\nüìö –§–∞–∫—É–ª—å—Ç–µ—Ç: {user.faculty}"
        
        profile_text += f"""
üë• –ì—Ä—É–ø–ø–∞: {user.group}
üéØ –†–æ–ª—å: {role_text}
‚úÖ –°—Ç–∞—Ç—É—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: {status_text}"""

        if hasattr(user, 'system_id') and user.system_id:
            profile_text += f"\nüîó ID –≤ —Å–∏—Å—Ç–µ–º–µ: {user.system_id}"

        # –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç–∞—Ç—É—Å–µ –∑–∞—è–≤–∫–∏
        if hasattr(user, 'application_approved'):
            application_status = "‚úÖ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º" if user.application_approved else "‚è≥ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏"
            profile_text += f"\nüìã –°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏: {application_status}"

        # –£–±—Ä–∞–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞
        if user.status == UserStatus.PENDING:
            profile_text += f"\n\n‚è≥ –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏."
            profile_text += f"\nüì® –í—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏."

        return profile_text

    @staticmethod
    def get_registration_confirmation(reg_data: dict) -> str:
        """–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏"""
        confirmation_text = f"""‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

üìù –§–ò–û: {reg_data['full_name']}
üéì –í–£–ó: {reg_data['university']}"""
        
        # –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∞–∫—É–ª—å—Ç–µ—Ç, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
        if 'faculty' in reg_data:
            confirmation_text += f"\nüìö –§–∞–∫—É–ª—å—Ç–µ—Ç: {reg_data['faculty']}"
        
        confirmation_text += f"""
üë• –ì—Ä—É–ø–ø–∞: {reg_data['group']}

–í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤–µ—Ä–Ω—ã?"""
        
        return confirmation_text

    @staticmethod
    def get_ai_welcome() -> str:
        """–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ AI-—á–∞—Ç–∞"""
        return """ü§ñ –ß–∞—Ç-–±–æ—Ç StudGram AI

–Ø –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å –≤–∞–º —Å —É—á–µ–±–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏! –ú–æ–∂–µ—Ç–µ —Å–ø—Ä–æ—Å–∏—Ç—å –º–µ–Ω—è –æ:
‚Ä¢ –†–∞—Å–ø–∏—Å–∞–Ω–∏–∏ –∑–∞–Ω—è—Ç–∏–π
‚Ä¢ –î–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏—è—Ö  
‚Ä¢ –£—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö
‚Ä¢ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º
‚Ä¢ –ò –ª—é–±—ã—Ö –¥—Ä—É–≥–∏—Ö —É—á–µ–±–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö

–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å, –∏ —è –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –ø–æ–º–æ—á—å!

–î–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ä–µ–∂–∏–º–∞ —á–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ /menu"""

    @staticmethod
    def get_ai_thinking() -> str:
        """–°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ AI"""
        return "‚è≥ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å..."

    @staticmethod
    def get_ai_response(response: str) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ AI"""
        return f"ü§ñ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç:\n\n{response}"

    @staticmethod
    def get_ai_error() -> str:
        """–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ AI"""
        return "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ AI. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."

    @staticmethod
    def get_empty_message() -> str:
        """–°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—É—Å—Ç–æ–º –≤–≤–æ–¥–µ"""
        return "ü§ñ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç:\n\n–í—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –ø—É—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –∑–∞–ø—Ä–æ—Å."

    @staticmethod
    def get_no_content_message() -> str:
        """–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞"""
        return "ü§ñ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç:\n\n–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –∏–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞."

    @staticmethod
    def get_chat_exit() -> str:
        """–°–æ–æ–±—â–µ–Ω–∏–µ –æ –≤—ã—Ö–æ–¥–µ –∏–∑ —Ä–µ–∂–∏–º–∞ —á–∞—Ç–∞"""
        return """‚úÖ –í—ã –≤—ã—à–ª–∏ –∏–∑ —Ä–µ–∂–∏–º–∞ —á–∞—Ç-–±–æ—Ç–∞. 

–ß—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—â–µ–Ω–∏–µ, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ '–ß–∞—Ç-–±–æ—Ç' –≤ –º–µ–Ω—é."""

    # –£–±—Ä–∞–Ω –º–µ—Ç–æ–¥ get_management_info()

    @staticmethod
    def get_access_denied() -> str:
        """–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç–∫–∞–∑–µ –≤ –¥–æ—Å—Ç—É–ø–µ"""
        return "‚ùå –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω!"

    @staticmethod
    def get_not_approved() -> str:
        """–°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–º –ø—Ä–æ—Ñ–∏–ª–µ"""
        return "‚ùå –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å –µ—â–µ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω. –î–æ—Å—Ç—É–ø –∫ —ç—Ç–æ–º—É —Ä–∞–∑–¥–µ–ª—É –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã—Ç –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏."

    @staticmethod
    def get_error_message() -> str:
        """–û–±—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ"""
        return "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."

    @staticmethod
    def get_registration_start() -> str:
        """–ù–∞—á–∞–ª–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏"""
        return """–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ StudGram! üìö

–î–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —É–∫–∞–∂–∏—Ç–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ.

–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –§–ò–û:"""

    @staticmethod
    def get_registration_restart() -> str:
        """–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏"""
        return "üîÑ –ù–∞—á–∏–Ω–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∑–∞–Ω–æ–≤–æ. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –§–ò–û:"

    @staticmethod
    def get_university_selection() -> str:
        """–í—ã–±–æ—Ä —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞"""
        return "üéì –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –≤—É–∑:"

    @staticmethod
    def get_faculty_selection(university: str) -> str:
        """–í—ã–±–æ—Ä —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞"""
        return f"üéì –í—É–∑: {university}\nüìö –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Ñ–∞–∫—É–ª—å—Ç–µ—Ç:"

    @staticmethod
    def get_group_selection(university: str, faculty: str = None) -> str:
        """–í—ã–±–æ—Ä –≥—Ä—É–ø–ø—ã"""
        faculty_text = f" (—Ñ–∞–∫—É–ª—å—Ç–µ—Ç: {faculty})" if faculty else ""
        return f"üéì –í—É–∑: {university}{faculty_text}\nüë• –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à—É –≥—Ä—É–ø–ø—É:"

    @staticmethod
    def get_registration_complete(user: User, registration_success: bool = False) -> str:
        """–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏"""
        faculty_text = f"\nüìö –§–∞–∫—É–ª—å—Ç–µ—Ç: {user.faculty}" if hasattr(user, 'faculty') and user.faculty else ""
        
        if user.status == UserStatus.APPROVED:
            status_text = f"‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ StudGram!{faculty_text}"
            # –£–±—Ä–∞–Ω–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–µ
            if registration_success:
                status_text += "\nüîó –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–∏—Å—Ç–µ–º–æ–π StudGram"
            else:
                status_text += "\n‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å —Å–∏—Å—Ç–µ–º–æ–π StudGram"
        else:
            status_text = f"‚è≥ –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏.{faculty_text}\n–í—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏."
            if registration_success:
                status_text += "\nüîó –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–∏—Å—Ç–µ–º–æ–π StudGram"
                
        return status_text